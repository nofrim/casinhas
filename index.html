<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Engenharia - Casinhas</title>
    <style>
        :root { --blue: #1a73e8; --red: #d93025; --gray: #5f6368; }
        body { font-family: 'Segoe UI', Roboto, sans-serif; margin: 0; padding: 10px; background: #f1f3f4; }
        .header { background: white; padding: 15px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 15px; }
        h2 { margin: 0 0 10px 0; color: var(--blue); font-size: 1.1rem; text-align: center; }
        input { width: 100%; padding: 12px; margin: 5px 0; border: 1px solid #dadce0; border-radius: 8px; box-sizing: border-box; font-size: 16px; }
        .btn-main { width: 100%; padding: 14px; background: var(--blue); color: white; border: none; border-radius: 8px; font-weight: bold; margin-top: 5px; font-size: 16px; }
        
        .section-title { font-weight: bold; color: #444; margin: 25px 0 8px 5px; text-transform: uppercase; font-size: 0.75rem; border-bottom: 2px solid var(--blue); display: inline-block; padding-bottom: 2px; }
        
        .card { background: white; margin-bottom: 8px; border-radius: 10px; display: flex; flex-direction: column; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .card-content { padding: 12px; text-decoration: none; color: #202124; display: block; }
        .card-content strong { display: block; font-size: 1rem; margin-bottom: 3px; }
        .card-content span { font-size: 0.8rem; color: var(--gray); font-family: monospace; }
        
        .card-actions { display: flex; border-top: 1px solid #f1f3f4; background: #fafafa; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; }
        .card-actions button { flex: 1; padding: 8px; border: none; background: none; font-size: 0.75rem; color: var(--blue); font-weight: bold; cursor: pointer; }
        .card-actions .btn-delete { color: var(--red); border-left: 1px solid #eee; }
    </style>
</head>
<body>

    <div class="header">
        <h2>üìç Gest√£o de Visitas - Engenharia</h2>
        <input type="hidden" id="editIndex" value="-1">
        <input type="text" id="nome" placeholder="Nome do Benefici√°rio">
        <input type="text" id="endereco" placeholder="C√≥rrego / Localidade">
        <input type="text" id="coords" placeholder="Lat, Long (Ex: -20.xxx, -41.xxx)">
        <button class="btn-main" onclick="salvar()">Salvar Altera√ß√£o / Novo</button>
    </div>

    <div id="listaAgrupada"></div>

    <script>
        const dadosIniciais = [
            {nome:"ALEX ESTANECK COELHO", endereco: "C√≥rrego Capim Roxo", coords: "-20.484689, -41.986653"},
            {nome:"ALINE FERNANDES ESTANECK", endereco: "C√≥rrego Jacutinga", coords: "-20.408042, -41.987086"},
            {nome:"ANA M. B. DE ALMEIDA", endereco: "C√≥rrego Tavares", coords: "-20.430344, -41.923678"},
            {nome:"ANGELICA D. S. M. MIRANDA", endereco: "C√≥rrego Jos√© Pedro", coords: "-20.382497, -41.860444"},
            {nome:"BRENO FERREIRA DA SILVA", endereco: "C√≥rrego Vargem Grande", coords: "-20.405522, -41.895681"},
            {nome:"BRUNO FERREIRA ANDRADE", endereco: "C√≥rrego Po√ßo Danta", coords: "-20.469133, -42.001147"},
            {nome:"CAROLINA D.G. DE OLIVEIRA", endereco: "C√≥rrego Vista Alegre", coords: "-20.437328, -41.947931"},
            {nome:"DANIELA M. D. O. FARIA", endereco: "C√≥rrego Jos√© Pedro", coords: "-20.390806, -41.864278"},
            {nome:"DENIVAL WERNER", endereco: "C√≥rrego Santo Augustinho", coords: "-20.436397, -41.929142"},
            {nome:"DERCIO JOSE DE SOUZA", endereco: "C√≥rrego Boa Sorte", coords: "-20.437164, -41.944783"},
            {nome:"DIRCINEIA F. D. A. CAMARA", endereco: "C√≥rrego Jos√© Pedro", coords: "-20.388386, -41.870819"},
            {nome:"EDUARDO EMERICK SOARES", endereco: "C√≥rrego Vargem Grande", coords: "-20.470644, -42.012942"},
            {nome:"EDSON INOCENCIO FERREIRA", endereco: "C√≥rrego Vargem Grande", coords: "-20.471300, -42.018783"},
            {nome:"EMELY CAROLAYNE C.DE SOUZA", endereco: "C√≥rrego Vargem Grande", coords: "-20.470664, -42.001447"},
            {nome:"ELCEDIR C. F. DE OLIVEIRA", endereco: "C√≥rrego Vargem Grande", coords: "-20.471108, -42.001172"},
            {nome:"ELENICE CORREA SILVEIRA", endereco: "C√≥rrego Jacutinga", coords: "-20.410753, -41.915331"},
            {nome:"FRANCIELE P. F. VIEIRA", endereco: "C√≥rrego Vargem Grande", coords: "-20.488208, -42.022181"},
            {nome:"FERNANDO D. A. QUEIROZ", endereco: "C√≥rrego Vargem Grande", coords: "-20.482092, -42.020036"},
            {nome:"GABRIELA A. D. A. FONSECA", endereco: "C√≥rrego Jacutinga", coords: "-20.382789, -41.909478"},
            {nome:"GILSON G. D ROZA JUNIOR", endereco: "C√≥rrego Vargem Grande", coords: "-20.468914, -42.012203"},
            {nome:"GISELE CORREA VAZ", endereco: "C√≥rrego Boa Esperan√ßa", coords: "-20.481000, -41.915161"},
            {nome:"HUGO FERNANDES MIRANDA", endereco: "C√≥rrego Vargem Grande", coords: "-20.466894, -42.015106"},
            {nome:"IGOR PORTUGAL CORREA", endereco: "C√≥rrego Jacutinga", coords: "-20.402344, -41.964047"},
            {nome:"JAQUELINE D. O. B. GARCIA", endereco: "C√≥rrego Indalassu", coords: "-20.472611, -42.013028"},
            {nome:"LETICIA DE SOUZA M. AZEVEDO", endereco: "C√≥rrego Vista Bela", coords: "-20.482417, -41.961775"},
            {nome:"LUANA M.S.C.BRUM", endereco: "C√≥rrego Jacutinga", coords: "-20.471722, -41.900494"},
            {nome:"LUCAS TARDEN DOS SANTOS", endereco: "C√≥rrego Vargem Grande", coords: "-20.489583, -42.022564"},
            {nome:"LUCY STANECK CORREA", endereco: "C√≥rrego Jacutinga", coords: "-20.459236, -41.978158"},
            {nome:"LARISSA FARIA BARROSO", endereco: "C√≥rrego Vargem Grande", coords: "-20.485300, -42.029275"},
            {nome:"MARCOS ANTONIO CESAR", endereco: "C√≥rrego Po√ßo Danta", coords: "-20.469950, -42.003231"},
            {nome:"MARIANE VIANA DA ROZA", endereco: "C√≥rrego Vargem Grande", coords: "-20.472269, -42.000000"},
            {nome:"MARLI OSORIO DOS SANTOS", endereco: "C√≥rrego Jos√© Pedro", coords: "-20.480475, -41.986189"},
            {nome:"PAMELA BOREL D. S. SILVA", endereco: "C√≥rrego Jacutinga", coords: "-20.406397, -41.898014"},
            {nome:"REGINALDO S. DOS SANTOS", endereco: "C√≥rrego Vargem Grande", coords: "-20.487664, -42.024856"},
            {nome:"REAN B. D. O. LIMA", endereco: "C√≥rrego Vargem Grande", coords: "-20.477606, -42.000000"},
            {nome:"RAQUEL COSTA OLIVEIRA SILVA", endereco: "C√≥rrego Jos√© Pedro", coords: "-20.377531, -41.862439"},
            {nome:"RICARDO C. DA SILVA", endereco: "C√≥rrego Jos√© Pedro", coords: "-20.382275, -41.862344"},
            {nome:"SABRINA SALIM ROQUE", endereco: "C√≥rrego Jacutinga", coords: "-20.403358, -41.897942"},
            {nome:"SEBASTI√ÉO DO SANTOS RAMOS", endereco: "C√≥rrego Vargem Grande", coords: "-20.472664, -42.000000"},
            {nome:"SEBASTI√ÉO BARROSO", endereco: "C√≥rrego Vargem Grande", coords: "-20.472525, -42.000000"},
            {nome:"SILVINA D. F. PACHECO", endereco: "C√≥rrego Jacutinga", coords: "-20.387678, -41.912203"},
            {nome:"TATIANE M. S. COSTA", endereco: "C√≥rrego Vargem Grande", coords: "-20.489842, -42.034264"},
            {nome:"VANESSA CARLA C. DA ROZA", endereco: "C√≥rrego Vargem Grande", coords: "-20.480689, -42.000000"},
            {nome:"VILMA A. DOS SANTOS", endereco: "C√≥rrego Jacutinga", coords: "-20.487336, -42.022050"},
            {nome:"VERONICA D. S. DIONIZIO", endereco: "C√≥rrego Vargem Grande", coords: "-20.483039, -41.972231"},
            {nome:"WARLEY BORGES DA ROZA", endereco: "C√≥rrego Indalassu", coords: "-20.470656, -42.011811"},
            {nome:"WALLACE BORGES DA ROZA", endereco: "C√≥rrego Vargem Grande", coords: "-20.470725, -42.000000"}
        ];

        function getLocais() {
            const salvos = localStorage.getItem('casinhasDB');
            if (!salvos) {
                localStorage.setItem('casinhasDB', JSON.stringify(dadosIniciais));
                return dadosIniciais;
            }
            return JSON.parse(salvos);
        }

        function salvar() {
            const index = document.getElementById('editIndex').value;
            const novo = {
                nome: document.getElementById('nome').value.toUpperCase(),
                endereco: document.getElementById('endereco').value,
                coords: document.getElementById('coords').value.replace(" ", "")
            };

            if (!novo.nome || !novo.coords) return alert("Preencha Nome e Coordenadas!");

            let locais = getLocais();
            if (index == "-1") {
                locais.push(novo);
            } else {
                locais[index] = novo;
                document.getElementById('editIndex').value = "-1";
            }

            localStorage.setItem('casinhasDB', JSON.stringify(locais));
            document.getElementById('nome').value = '';
            document.getElementById('endereco').value = '';
            document.getElementById('coords').value = '';
            render();
        }

        function render() {
            const container = document.getElementById('listaAgrupada');
            let locais = getLocais();
            
            // Ordenar por localidade (C√≥rrego)
            locais.sort((a, b) => a.endereco.localeCompare(b.endereco));

            let html = '';
            let lastEndereco = '';

            locais.forEach((local, i) => {
                if (local.endereco !== lastEndereco) {
                    html += `<div class="section-title">üìç ${local.endereco || 'OUTROS'}</div>`;
                    lastEndereco = local.endereco;
                }

                html += `
                    <div class="card">
                        <a class="card-content" href="https://www.google.com/maps/dir/?api=1&destination=${local.coords}" target="_blank">
                            <strong>${local.nome}</strong>
                            <span>${local.coords}</span>
                        </a>
                        <div class="card-actions">
                            <button onclick="prepararEdicao(${i})">‚öôÔ∏è EDITAR</button>
                            <button class="btn-delete" onclick="excluir(${i})">üóëÔ∏è EXCLUIR</button>
                        </div>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function prepararEdicao(i) {
            const local = getLocais()[i];
            document.getElementById('nome').value = local.nome;
            document.getElementById('endereco').value = local.endereco;
            document.getElementById('coords').value = local.coords;
            document.getElementById('editIndex').value = i;
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function excluir(i) {
            if (confirm("Apagar este registro permanentemente?")) {
                let locais = getLocais();
                locais.splice(i, 1);
                localStorage.setItem('casinhasDB', JSON.stringify(locais));
                render();
            }
        }

        window.onload = render;
    </script>
</body>
</html>
